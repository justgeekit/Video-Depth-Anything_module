<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zachry Open Worlds Studio</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header class="header">
        <div class="brand">
            <div class="brand-icon">Z</div>
            <div>
                <div class="brand-name">Zachry Open Worlds Studio</div>
                <div class="brand-sub">Video Depth Anything</div>
            </div>
        </div>
        <div class="header-status" id="headerStatus">Ready</div>
    </header>

    <div class="container">
        <div id="errorBanner" class="error-banner"></div>

        <!-- Section 1: Upload -->
        <div id="sectionUpload" class="section active">
            <div class="dropzone" id="dropzone">
                <div class="dropzone-icon">&#x1F3AC;</div>
                <div class="dropzone-title">Drop your video here</div>
                <div class="dropzone-subtitle">or click to browse &mdash; MP4, MOV, AVI, MKV, WebM</div>
                <input type="file" id="fileInput" accept=".mp4,.mov,.avi,.mkv,.webm,.m4v">
            </div>
        </div>

        <!-- Section 2: Settings -->
        <div id="sectionSettings" class="section">
            <div class="settings-panel">
                <div class="file-info">
                    <div>
                        <div class="file-info-name" id="fileName">video.mp4</div>
                        <div class="file-info-size" id="fileSize">0 MB</div>
                    </div>
                    <button class="file-info-change" id="changeFile">Change file</button>
                </div>

                <div class="settings-title">Processing Settings</div>

                <div class="settings-grid">
                    <div class="form-group">
                        <label for="encoder">Depth Model</label>
                        <select id="encoder">
                            <option value="vitl" selected>ViT-Large (Best quality)</option>
                            <option value="vitb">ViT-Base (Balanced)</option>
                            <option value="vits">ViT-Small (Fastest)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="inputSize">Model Input Size</label>
                        <select id="inputSize">
                            <option value="518" selected>518 (Default)</option>
                            <option value="392">392 (Faster)</option>
                            <option value="280">280 (Fastest)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maxRes">Max Resolution</label>
                        <select id="maxRes">
                            <option value="1920">1920 (Full HD)</option>
                            <option value="1280" selected>1280 (Default)</option>
                            <option value="960">960</option>
                            <option value="640">640 (Fast)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetFps">Target FPS</label>
                        <select id="targetFps">
                            <option value="-1" selected>Original</option>
                            <option value="30">30 fps</option>
                            <option value="24">24 fps</option>
                            <option value="15">15 fps</option>
                        </select>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn btn-secondary" id="btnBack">Back</button>
                    <button class="btn btn-primary" id="btnProcess">Generate RGBD</button>
                </div>
            </div>
        </div>

        <!-- Section 3: Progress -->
        <div id="sectionProgress" class="section">
            <div class="progress-container">
                <div class="progress-title">Processing Video</div>
                <div class="progress-message" id="progressMessage">Initializing...</div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBar"></div>
                </div>
                <div class="progress-stages">
                    <div class="stage" data-stage="extracting_audio">
                        <div class="stage-dot"></div>
                        <span>Audio</span>
                    </div>
                    <div class="stage" data-stage="reading_frames">
                        <div class="stage-dot"></div>
                        <span>Frames</span>
                    </div>
                    <div class="stage" data-stage="estimating_depth">
                        <div class="stage-dot"></div>
                        <span>Depth</span>
                    </div>
                    <div class="stage" data-stage="saving_source">
                        <div class="stage-dot"></div>
                        <span>Save Source</span>
                    </div>
                    <div class="stage" data-stage="saving_depth">
                        <div class="stage-dot"></div>
                        <span>Save Depth</span>
                    </div>
                    <div class="stage" data-stage="merging_rgbd">
                        <div class="stage-dot"></div>
                        <span>Merge RGBD</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Results -->
        <div id="sectionResults" class="section">
            <div class="results-grid">
                <div class="result-card">
                    <div class="result-card-header">Source</div>
                    <video id="videoSrc" controls muted loop></video>
                </div>
                <div class="result-card">
                    <div class="result-card-header">Depth Map</div>
                    <video id="videoDepth" controls muted loop></video>
                </div>
                <div class="result-card" style="grid-column: 1 / -1;">
                    <div class="result-card-header">RGBD Output (Looking Glass Ready)</div>
                    <video id="videoRgbd" controls muted loop></video>
                </div>
            </div>
            <div class="result-actions">
                <a class="download-btn" id="downloadBtn" href="#" download>
                    Download RGBD Video
                </a>
            </div>
            <div class="actions" style="margin-top: 12px;">
                <button class="btn btn-secondary" id="btnNewJob">Process Another Video</button>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
